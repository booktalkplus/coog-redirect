<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>쿠지 중간 리디렉션 페이지</title>

  <!--
    ✅ 리디렉션 방식 설명
    이 페이지는 검색어(q 파라미터)를 받아 쿠팡 앱스앱 주소로 자동 이동하는 중간 페이지입니다.
    기존에는 JavaScript의 window.location.href 방식으로 이동했지만,
    GPT, Gmail, 카카오톡 등에서 주소가 "u/2/s/..." 형태로 강제 변경되어 오류가 발생했습니다.

    이를 해결하기 위해 meta refresh 방식으로 리디렉션을 구현했습니다.
    이 방식은 브라우저가 HTML의 선언적 명령을 그대로 실행하기 때문에,
    링크가 노출되거나 변조되지 않고 안전하게 목적지로 이동합니다.
  -->

  <script>
    const keyword = new URLSearchParams(window.location.search).get("q");
    if (keyword) {
      const encoded = encodeURIComponent(keyword);
      const finalUrl = "https://script.google.com/macros/s/AKfycbxdpCXzRC0vsSa1KTNL-TA5hajmwXsj4ouUq8qzRYzR1vr111_2Geza3eOGGCIDOPjKIQ/exec?q=" + encoded;
      document.write('<meta http-equiv="refresh" content="0; url=' + finalUrl + '">');
    } else {
      document.write("<p>검색어가 없습니다.</p>");
    }
  </script>
</head>
<body>
  <p>쿠팡 추천 페이지로 이동 중입니다...</p>
</body>
</html>
